<!DOCTYPE html>
<html>
    <head>
        <title>MusicStudyPlatform - Load File</title>
        <meta name="robots" content="noindex, nofollow">
<!-- Include CSS File Here -->
        <link rel="stylesheet" href="templates/auth/style.css"/>
<!-- Include JS File Here -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script type="text/javascript">
$(document).ready(function(){

    $("#but_upload").click(function(){

        var fd = new FormData();
        var files = $('#file')[0].files[0];
        fd.set('file',files);

        $.ajax({
            url: '/api/lesson/21/put_photo',
            type: 'post',
            beforeSend : function( xhr ) {
                      console.log(fd.get('file'));
                      var token = localStorage.getItem('Access');
                      xhr.setRequestHeader('Authorization', 'Bearer ' +  token);
                      xhr.setRequestHeader('Content-Disposition', 'attachment; filename="25.png"');
            },
            data: fd,
            contentType: false,
            processData: false,
            success: function(response) {console.log(fd.get('file'));}
        });
    });
});
        </script>
    </head>

    <body>
        <div class="container">
        <div class="main">
            <form id="files" method="post" enctype="multipart/form-data">
                 {% csrf_token %}
            <input name="file" type="file" id="file"/>

            <input type="button" class="button" value="Upload" id="but_upload">
        </form>
        </div>
        </div>
    </body>
</html>
